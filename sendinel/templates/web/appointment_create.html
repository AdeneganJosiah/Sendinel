{% extends "base.html" %}
{% load i18n %} 
{% block script %}
    <script type="text/javascript">
    
    $(document).ready(function() {
        $("#datepicker").datepicker({
            dateFormat: "yy-mm-dd",
            onSelect: function(dateText) {
                $("#date").val(dateText);
            },
            navigationAsDateFormat: true,
            nextText: 'MM',
            prevText: 'MM',
        });
        
        $(".ui-state-active").removeClass("ui-state-active")
                             .removeClass("ui-state-hover");    
    });
    </script>
    <script src="{{ MEDIA_URL }}/js/way_of_communication.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ MEDIA_URL }}/js/jVal.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/jval/jVal.css">

{% endblock %}

{% block content %}
    <div id="content-padding">
    <h3>{{ appointment_type.verbose_name }}</h3>
	<p>{% trans "Please enter the appointment details." %}</p>
    <p>
        <form action="./" method="post">
            <table class="cells_align_top">
                <tr>
                    <th>
                    <tr>
                    <th valign="top" align="left">
                    <label for="id_phone_input">Phone number:</label>
                        {% if form.phone_number.errors %}
                            {{ form.phone_number.errors }}
                        {% endif %}
                    </th>
                    <td valign="top" >
                        <input id="id_phone_input" type="text" name="phone_number" class="selectable" 
                            jVal="{valid:function (val) { if (val.length < 6) return false; else return true; }, message:'Please enter a valid phone number'}"
                            jValKey="{valid:/[+0-9]/, message:'&quot;%c&quot; not valid', cFunc:'$(\'#submitButton\').click();'}"></input>                       
                    </td>
                    {% if not appointment_type.notify_immediately %}
     
                    <td width="200">&nbsp;</td>
                    <th rowspan="2" >
                    
                            <label for="id_date_0">Date:&nbsp;</label>
                            {% if form.date.errors %}
                                {{ form.date.errors }}
                            {% endif %}

                        </th>
                        <td rowspan="2">
                        
                            <div id="datepicker" ></div>
                            <input id="date" type="hidden" name="date" />
                        </td>
                    {% endif %}
                </tr>
                
                <tr>
                    <th valign="top" align="left">
                        <label for="id_way_of_communication">Way of communication:&nbsp;</label>
                        {% if form.way_of_communication.errors %}
                            {{ form.way_of_communication.errors }}
                        {% endif %}
                    </th>
                    <td valign="top"> 
                        <select name="way_of_communication" id="id_way_of_communication">
                            <option value="" selected="selected">---------</option>
                            <option value="sms">SMS</option>
                {% comment %} 
                        bluetooth as a way of communication is comming soon    
                            {% if not appointment_type.notify_immediately %}
                                <option value="bluetooth">Bluetooth</option>
                            {% endif %}
                {% endcomment %}
                            <option value="voice">Voice Call</option>
                        </select>
                    </td>
                </tr>
            </table>

            {% include "web/control_buttons_widget.html" %}
        </form>        
    </p>
    </div>
    </div>
{% endblock %}
{% block infotext %}
    {% trans "When you have filled out all information, a notification will be sent to the patient one day before the appointment" %}
{% endblock %}
 
