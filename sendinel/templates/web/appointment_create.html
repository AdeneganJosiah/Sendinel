{% extends "base.html" %}
{% load i18n %} 
{% block script %}
    <script type="text/javascript">
    
    $(document).ready(function() {
        $("#datepicker").datepicker({
            dateFormat: "yy-mm-dd",
            onSelect: function(dateText) {
                $("#date").val(dateText);
            },
            navigationAsDateFormat: true,
            nextText: 'MM',
            prevText: 'MM',
        });
        
        $(".ui-state-active").removeClass("ui-state-active")
                             .removeClass("ui-state-hover");    
    });
    </script>
    <script src="{{ MEDIA_URL }}/js/way_of_communication.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ MEDIA_URL }}/js/jVal.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/jval/jVal.css">

{% endblock %}

{% block content %}
    <div id="content-padding" >
        <div id="contentform">
        <h3>{{ appointment_type.verbose_name }}</h3>
        <p>{% trans "Please enter the appointment details." %}</p>
        <p></p>
        <form name="appointment_create" action="./" method="post" >
        <br />
            
            <div class="button button_left button_float" onClick="javascript:location.href='{{ backurl }}'">
                back
            </div>
            <div class="field">
                <div class="head">
                    Phone number:
                        {% if form.phone_number.errors %}
                            {{ form.phone_number.errors }}
                        {% endif %}
                </div>
                <div class="input">
                    <input id="id_phone_input" type="text" name="phone_number" class="selectable" 
                            jVal="{valid:function (val) { if (val.length < 6) return false; else return true; }, message:'Please enter a valid phone number'}"
                            jValKey="{valid:/[+0-9]/, message:'&quot;%c&quot; not valid', cFunc:'$(\'#submitButton\').click();'}"></input>  
                </div>
            </div>
            <div class="field">
                <div class="head">
                    Date:&nbsp;
                    {% if form.date.errors %}
                                {{ form.date.errors }}
                    {% endif %}
                </div>
                <div class="input">
                    <div id="datepicker" ></div>
                    <input id="date" type="hidden" name="date" />
                </div>
            </div>
            
            <div class="field">
                <div class="head">
                    Way of communication:&nbsp;
                        {% if form.way_of_communication.errors %}
                            {{ form.way_of_communication.errors }}
                        {% endif %}
                </div>
                <div class="input">
                    <select name="way_of_communication" id="id_way_of_communication">
                            <option value="" selected="selected">---------</option>
                            <option value="sms">SMS</option>
                {% comment %} 
                        bluetooth as a way of communication is comming soon    
                            {% if not appointment_type.notify_immediately %}
                                <option value="bluetooth">Bluetooth</option>
                            {% endif %}
                {% endcomment %}
                            <option value="voice">Voice Call</option>
                        </select>
                </div>
            </div>
            <div class="button button_right button_float" onClick="appointment_create.submit();">next</div>
            <div style="clear:both;"></div>
            

        </form>        
    
    </div>
    </div>

{% endblock %}
