{% extends "base.html" %}
{% load i18n %}

{% block script %}
    <script type="text/javascript">
        $(document).ready(function(){
            $("#id_phone_input").keydown(function(event){
                if(event.keyCode === 37){
                    var phone_input = $("#id_phone_input");
                    var string = phone_input.val();
                    string = string.substr(0, (string.length - 1));
                    phone_input.val(string);                    
                    return false;
                }
            });
        });
    </script>
    <script src="{{ MEDIA_URL }}/js/way_of_communication.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ MEDIA_URL }}/js/jVal.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/jval/jVal.css">
{% endblock %}
 
{% block content %}
<div id="content-padding">
    <h3>{% trans "Register patient for " %} {{infoservice}}</h3>
	<p>{% trans "Please enter your phone number and the way you want to receive the messages" %}</p>
    <p>
        <form method="post" class="selectable_container" action='#' 
         autocomplete="off">
            <table>
                {% if error %}
                <tr><td></td><td>{{ error }}</td></tr>
                {% endif %}              
                <tr>
                  <td>{% trans "Phone Number" %}</td>
                  <td>
			<input id="id_phone_input" type="text" name="number" class="selectable" 
			    jVal="{valid:function (val) { if (val.length < 6) return false; else return true; }, message:'Please enter a valid phone number'}"
                            jValKey="{valid:/[+0-9]/, message:'&quot;%c&quot; Please only enter digits for the phone number', cFunc:'$(\'#submitButton\').click();'}"/>
		</td>
                </tr>
                <tr>
                  <td>{% trans "Way of Communication" %}</td>
                  <td>
                    <select name="way_of_communication" id="id_way_of_communication">
                     <option value='sms'>{% trans "SMS" %}</option>
                     <option value='voice'>{% trans "Voice Call" %}</option>
                    </select> 
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td>{% include "web/control_buttons_widget.html" %}</td>
                </tr>
	         </table>
        </form>
    </p>
</div>
{% endblock %}
