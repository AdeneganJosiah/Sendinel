<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Installation Manual for Sendinel
</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="installation_manual_v1.tex"> 
<meta name="date" content="2010-05-05 18:58:00"> 
<link rel="stylesheet" type="text/css" href="installation_manual_v1.css"> 
</head><body 
>
  <div class="maketitle">
                                                                                     
                                                                                     
<div class="minipage">                 <img 
src="installation_manual_v10x.png" alt="PIC" class="graphics" width="228.22922pt" height="85.35826pt" ><!--tex4ht:graphics  
name="installation_manual_v10x.png" src="utils/Sendinel_logo.pdf"  
--> <img 
src="installation_manual_v11x.png" alt="PIC" class="graphics"><!--tex4ht:graphics  
name="installation_manual_v11x.png" src="utils/hpi_logo_text.pdf"  
--></div>

<h2 class="titleHead">Installation Manual for Sendinel<br />
</h2>
<span 
class="phvb8t-x-x-114">Sending SMS and Phone Calls to Patients</span><br />
<span 
class="phvb8t-x-x-114">http://www.sendinel.org</span>
 <div class="author" ></div><br />
<div class="date" ><span 
class="pplr8t-x-x-144">Potsdam, May 2010</span></div>
                                                                                     
                                                                                     
  </div>
                                                                                     
                                                                                     
                                                                                     
                                                                                     
<div class="center" 
>
<!--l. 86--><p class="noindent" >
<!--l. 87--><p class="noindent" >[This page intentionally left blank]</div>
                                                                                     
                                                                                     
  <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
  <div class="tableofcontents">
  <span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">What is Sendinel for?</a></span>
<br />  <span class="sectionToc" >2 <a 
href="#x1-30002" id="QQ2-1-3">Setting up Sendinel</a></span>
<br />  &#x00A0;<span class="subsectionToc" >2.1 <a 
href="#x1-40002.1" id="QQ2-1-4">Requirements</a></span>
<br />  &#x00A0;<span class="subsectionToc" >2.2 <a 
href="#x1-50002.2" id="QQ2-1-5">Preparation</a></span>
<br />  <span class="sectionToc" >3 <a 
href="#x1-60003" id="QQ2-1-6">The Automatic Installation Script</a></span>
<br />  &#x00A0;<span class="subsectionToc" >3.1 <a 
href="#x1-70003.1" id="QQ2-1-7">Getting the installation package</a></span>
<br />  &#x00A0;<span class="subsectionToc" >3.2 <a 
href="#x1-80003.2" id="QQ2-1-12">Installing Sendinel</a></span>
<br />  <span class="sectionToc" >4 <a 
href="#x1-90004" id="QQ2-1-15">(manual) off-line installation</a></span>
<br />  &#x00A0;<span class="subsectionToc" >4.1 <a 
href="#x1-100004.1" id="QQ2-1-16">installing the needed packages</a></span>
<br />  &#x00A0;<span class="subsectionToc" >4.2 <a 
href="#x1-110004.2" id="QQ2-1-17">Setting up festival text-to-speech synthesis</a></span>
<br />  &#x00A0;<span class="subsectionToc" >4.3 <a 
href="#x1-120004.3" id="QQ2-1-18">Configuring the Asterisk Telephony Server</a></span>
<br />  &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.1 <a 
href="#x1-130004.3.1" id="QQ2-1-19">the datacard channel</a></span>
<br />  &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.2 <a 
href="#x1-140004.3.2" id="QQ2-1-20">Asterisk configuration files</a></span>
<br />  &#x00A0;&#x00A0;<span class="subsubsectionToc" >4.3.3 <a 
href="#x1-150004.3.3" id="QQ2-1-21">Other</a></span>
<br />  &#x00A0;<span class="subsectionToc" >4.4 <a 
href="#x1-160004.4" id="QQ2-1-22">Installing Sendinel</a></span>
<br />  &#x00A0;<span class="subsectionToc" >4.5 <a 
href="#x1-170004.5" id="QQ2-1-23">The lighttpd server</a></span>
<br />  &#x00A0;<span class="subsectionToc" >4.6 <a 
href="#x1-180004.6" id="QQ2-1-24">Init-Scripts</a></span>
<br />  <span class="sectionToc" >5 <a 
href="#x1-190005" id="QQ2-1-25">Possible settings for Sendinel</a></span>
<br />  &#x00A0;<span class="subsectionToc" >5.1 <a 
href="#x1-200005.1" id="QQ2-1-26">Country Settings</a></span>
<br />  &#x00A0;<span class="subsectionToc" >5.2 <a 
href="#x1-230005.2" id="QQ2-1-29">Asterisk Settings</a></span>
<br />  &#x00A0;<span class="subsectionToc" >5.3 <a 
href="#x1-290005.3" id="QQ2-1-35">Text-to-Speech settings</a></span>
<br />  &#x00A0;<span class="subsectionToc" >5.4 <a 
href="#x1-310005.4" id="QQ2-1-37">Sendinel Settings</a></span>
  </div>
                                                                                     
                                                                                     
  <h3 class="sectionHead"><span class="titlemark">1  </span> <a 
 id="x1-20001"></a>What is Sendinel for?</h3>
<!--l. 3--><p class="noindent" >Sendinel aims at improving the communication between clinics and patients. It allows clinics to
reach the patients on their cell phones. For example the clinic staff can inform patients if their lab
results or medicine have arrived. This quick information transfer avoids useless trips to the clinic for
the patients and improves the treatment. The clinic staff can also regularly send messages to a group
of people.For example, they can inform all subscribers to "Information about the Clinic" if a specialist
is coming the next day.
<!--l. 5--><p class="noindent" >
  <h3 class="sectionHead"><span class="titlemark">2  </span> <a 
 id="x1-30002"></a>Setting up Sendinel</h3>
<!--l. 7--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">2.1  </span> <a 
 id="x1-40002.1"></a>Requirements</h4>
<!--l. 8--><p class="noindent" >First, please make sure that the basic system requirements are met:
     <ul class="itemize1">
     <li class="itemize">a running Linux installation - for the automated installer Ubuntu or Debian is required.
     In this linux distribution at least Asterisk 1.6 and Python 2.5 have to be supported
     </li>
     <li class="itemize">If the asterisk telephony server is not present yet, at least 150MB of free disk space are
     needed and 50MB have to be downloaded
     </li>
     <li class="itemize">a working network connection
     </li>
     <li class="itemize">an internet connection if the packages are to be installed from a web resource (at least
     60MB have to be downloaded)
     </li>
     <li class="itemize">a free USB port to connect the 3G Stick
     </li>
     <li class="itemize">a Huawei E169 (also known as Vodafone K3520) - other devices will not work!</li></ul>
                                                                                     
                                                                                     
<!--l. 19--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">2.2  </span> <a 
 id="x1-50002.2"></a>Preparation</h4>
<!--l. 20--><p class="noindent" >Please make sure that you have inserted a working SIM-Card <span 
class="pplri8t-x-x-109">without PIN protection </span>into the 3G stick.
Connect the stick to the system.
<!--l. 1--><p class="noindent" >
  <h3 class="sectionHead"><span class="titlemark">3  </span> <a 
 id="x1-60003"></a>The Automatic Installation Script</h3>
<!--l. 2--><p class="noindent" >To use the automatic installation script your system has to run either Debian or Ubuntu. A internet
connection is required - as a lot of data has to be downloaded a broadband connection is
recommended. On Debian at least 50 MB have to be downloaded.
<!--l. 4--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">3.1  </span> <a 
 id="x1-70003.1"></a>Getting the installation package</h4>
<!--l. 5--><p class="noindent" >Either go to http://github.com/Sendinel/Sendinel/ and choose <span 
class="pplri8t-x-x-109">Download Source </span>to get the Sendinel
archive or use the direct link <span 
class="pplri8t-x-x-109">http://github.com/Sendinel/Sendinel/tarball/master</span>.
<!--l. 7--><p class="indent" >  To download the file you may use your preferred browser, like Firefox. You may also use the
command line tool wget.
<!--l. 9--><p class="indent" >  To do that, you first have to open a <span 
class="pplri8t-x-x-109">terminal</span>, sometimes also called <span 
class="pplri8t-x-x-109">command line</span>. On Debian it can
be found in the <span 
class="pplri8t-x-x-109">upper menu bar </span><span 
class="zplmr7y-x-x-109">&#x2192; </span><span 
class="pplri8t-x-x-109">Applications </span><span 
class="zplmr7y-x-x-109">&#x2192; </span><span 
class="pplri8t-x-x-109">Accessories </span><span 
class="zplmr7y-x-x-109">&#x2192; </span><span 
class="pplri8t-x-x-109">Terminal</span>
<!--l. 11--><p class="indent" >  <hr class="figure"><div class="figure" 
>
                                                                                     
                                                                                     
<a 
 id="x1-7001r1"></a>
                                                                                     
                                                                                     

<!--l. 13--><p class="noindent" ><img 
src="images/open_terminal.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content">opening a terminal on Debian</span></div><!--tex4ht:label?: x1-7001r1 -->
                                                                                     
                                                                                     
<!--l. 15--><p class="indent" >  </div><hr class="endfigure">
<!--l. 18--><p class="indent" >  After the terminal has been opened, you may create a new folder with <span 
class="pplri8t-x-x-109">mkdir [Foldername] </span>or you
may just use your home directory.
<!--l. 20--><p class="indent" >  To download the Sendinel core files with wget, enter <!--l. 21-->
  <div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-7002r1"></a></span>wget&#x00A0;http://github.com/Sendinel/Sendinel/tarball/master
  
  </div>
<!--l. 24--><p class="indent" >  and press the <span 
class="pplri8t-x-x-109">Return </span>key on your keyboard.
<!--l. 26--><p class="indent" >  The download progress will be displayed, as seen in this screenshot.
<!--l. 28--><p class="indent" >  <hr class="figure"><div class="figure" 
>
                                                                                     
                                                                                     
<a 
 id="x1-7003r2"></a>
                                                                                     
                                                                                     

<!--l. 30--><p class="noindent" ><img 
src="images/wget_download.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;2: </span><span  
class="content">downloading Sendinel with wget</span></div><!--tex4ht:label?: x1-7003r2 -->
                                                                                     
                                                                                     
<!--l. 32--><p class="indent" >  </div><hr class="endfigure">
<!--l. 34--><p class="indent" >  After the file has been downloaded, it has to be extracted. This is to be done with the command
<!--l. 34-->
  <div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-7004r1"></a></span>tar&#x00A0;<span 
class="zplmr7y-x-x-109">-</span>xzf&#x00A0;[Name&#x00A0;of&#x00A0;the&#x00A0;downloaded&#x00A0;file]
  
  </div>
<!--l. 38--><p class="indent" >  You may also just enter <span 
class="pplri8t-x-x-109">tar -xzf   </span>and the first letters of the filename (S in this case - please pay
attention to Uppercase/Lowercase) and press the <span 
class="pplri8t-x-x-109">TAB</span>-key to let the terminal enter the right name.
Afterwards use <span 
class="pplri8t-x-x-109">cd </span>to change to the directory where you have just extracted the files. Also here you
may use the auto completion feature of the terminal.
<!--l. 40--><p class="indent" >  <hr class="figure"><div class="figure" 
>
                                                                                     
                                                                                     
<a 
 id="x1-7005r3"></a>
                                                                                     
                                                                                     

<!--l. 42--><p class="noindent" ><img 
src="images/untar.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;3: </span><span  
class="content">extracting the archive and changing the directory</span></div><!--tex4ht:label?: x1-7005r3 -->
                                                                                     
                                                                                     
<!--l. 44--><p class="indent" >  </div><hr class="endfigure">
<!--l. 46--><p class="indent" >  If your are using debian, use <span 
class="pplri8t-x-x-109">su </span>to become the superuser (root), which is equivalent to the
<span 
class="pplri8t-x-x-109">Administrator </span>on Windows.
<!--l. 48--><p class="indent" >  <hr class="figure"><div class="figure" 
>
                                                                                     
                                                                                     
<a 
 id="x1-7006r4"></a>
                                                                                     
                                                                                     

<!--l. 50--><p class="noindent" ><img 
src="images/su.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;4: </span><span  
class="content">extracting the archive and changing the directory</span></div><!--tex4ht:label?: x1-7006r4 -->
                                                                                     
                                                                                     
<!--l. 52--><p class="indent" >  </div><hr class="endfigure">
  <h4 class="subsectionHead"><span class="titlemark">3.2  </span> <a 
 id="x1-80003.2"></a>Installing Sendinel</h4>
<!--l. 56--><p class="noindent" >To start the installation enter <!--l. 57-->
  <div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-8001r1"></a></span>sh&#x00A0;install.sh
  
  </div>
<!--l. 61--><p class="indent" >  <hr class="figure"><div class="figure" 
>
                                                                                     
                                                                                     
<a 
 id="x1-8002r5"></a>
                                                                                     
                                                                                     

<!--l. 63--><p class="noindent" ><img 
src="images/start_install.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5: </span><span  
class="content">starting the Sendinel installer</span></div><!--tex4ht:label?: x1-8002r5 -->
                                                                                     
                                                                                     
<!--l. 65--><p class="indent" >  </div><hr class="endfigure">
<!--l. 67--><p class="indent" >  After some seconds (this may also take a little bit longer), the system displays how much has to be
downloaded and asks for confirmation. If it is okay, simply press the <span 
class="pplri8t-x-x-109">Return </span>key and start the
download.
<!--l. 69--><p class="indent" >  <hr class="figure"><div class="figure" 
>
                                                                                     
                                                                                     
<a 
 id="x1-8003r6"></a>
                                                                                     
                                                                                     

<!--l. 71--><p class="noindent" ><img 
src="images/continue.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;6: </span><span  
class="content">Download Confirmation</span></div><!--tex4ht:label?: x1-8003r6 -->
                                                                                     
                                                                                     
<!--l. 73--><p class="indent" >  </div><hr class="endfigure">
<!--l. 75--><p class="indent" >  During the setup you will be asked for your country code. If you don&#8217;t know it, it can be found on
Wikipedia: http://en.wikipedia.org/wiki/List_of_country_calling_codes . Do not enter the <span 
class="pplri8t-x-x-109">+ </span>but
only the digits. Later, you will be asked if you want to create an <span 
class="pplri8t-x-x-109">administrative user</span>. It is
recommended to do so. Enter name, password and e-mail address.
<!--l. 77--><p class="indent" >  This process may take some time and will displays if errors occur.
  <h3 class="sectionHead"><span class="titlemark">4  </span> <a 
 id="x1-90004"></a>(manual) off-line installation</h3>
<!--l. 2--><p class="noindent" >If you are either not able to install from online package sources or you want to control the
installation by yourself (maybe because you are using another Linux distribution), you should
follow this guide
<!--l. 4--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">4.1  </span> <a 
 id="x1-100004.1"></a>installing the needed packages</h4>
<!--l. 5--><p class="noindent" >Please make sure the following packages are installed on your system; on Ubuntu/Debian you may
use <span 
class="pplri8t-x-x-109">apt-get install </span>to install them
     <ul class="itemize1">
     <li class="itemize">asterisk
     </li>
     <li class="itemize">festival
     </li>
     <li class="itemize">lighttpd
     </li>
     <li class="itemize">sudo
     </li>
     <li class="itemize">build-essential
     </li>
     <li class="itemize">python-setuptools
     </li>
     <li class="itemize">wget</li></ul>
<!--l. 17--><p class="indent" >  The following python packages also have to be installed. For that you may use <span 
class="pplri8t-x-x-109">easy_install</span>
     <ul class="itemize1">
     <li class="itemize">python-daemon lockfile
     </li>
     <li class="itemize">python-daemon lockfile</li></ul>
                                                                                     
                                                                                     
<!--l. 24--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">4.2  </span> <a 
 id="x1-110004.2"></a>Setting up festival text-to-speech synthesis</h4>
<!--l. 25--><p class="noindent" >To get a working festival installation, installing the package should be enough. If you like to change
the default voice, please refer to the festival documentation.
<!--l. 27--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">4.3  </span> <a 
 id="x1-120004.3"></a>Configuring the Asterisk Telephony Server</h4>
<!--l. 28--><p class="noindent" >
  <h5 class="subsubsectionHead"><span class="titlemark">4.3.1  </span> <a 
 id="x1-130004.3.1"></a>the datacard channel</h5>
<!--l. 29--><p class="noindent" >Download the latest revision of chan datacard from github: <!--l. 30-->
  <div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-13001r1"></a></span>http://github.com/thomasklingbeil/chan\_datacard
  
  </div>
<!--l. 34--><p class="indent" >  You can either use git or download a tarball of the source code from <!--l. 35-->
  <div class="lstlisting" id="listing-5"><span class="label"><a 
 id="x1-13002r1"></a></span>http://github.com/thomasklingbeil/chan\_datacard/tarball/master
  
  </div>
<!--l. 39--><p class="indent" >  If you have downloaded the tarball you&#8217;ve got to untar it, using
  <!--l. 41-->
  <div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x1-13003r1"></a></span>tar&#x00A0;<span 
class="zplmr7y-x-x-109">-</span>xvzf&#x00A0;[name&#x00A0;of&#x00A0;the&#x00A0;file]
  
  </div>
<!--l. 46--><p class="indent" >  Change the directory to the folder where you extracted the files and run the following commands
make make install
<!--l. 50--><p class="indent" >  If you want to configure the datacard by yourself, you can use the datacard.conf from the
repository as a template. Else, you can also use the version from the Sendinel repository. In each case
the file has to be copied to <span 
class="pplri8t-x-x-109">/etc/asterisk/datacard.conf</span>
<!--l. 52--><p class="noindent" >
  <h5 class="subsubsectionHead"><span class="titlemark">4.3.2  </span> <a 
 id="x1-140004.3.2"></a>Asterisk configuration files</h5>
<!--l. 53--><p class="noindent" >If you have a plain Asterisk installation it is recommended to use the <span 
class="pplri8t-x-x-109">extensions.conf  </span>file from
the Sendinel repository. It includes all necessary settings for the Asterisk server to run
Sendinel.
                                                                                     
                                                                                     
<!--l. 55--><p class="indent" >  Manual configuration: If authentication is to be used, an extension in the default call context has to
be created which runs a special AGI script for each incoming call; This script created an entry
into the Sendinel call log. If such an entry is already existing, extend it to run the AGI
script.
  <!--l. 57-->
  <div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x1-14001r1"></a></span>[default]&#x00A0;<br /><span class="label"><a 
 id="x1-14002r2"></a></span>...&#x00A0;<br /><span class="label"><a 
 id="x1-14003r3"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,1,AGI(call_log.agi)&#x00A0;<br /><span class="label"><a 
 id="x1-14004r4"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,n,Wait(20)&#x00A0;<br /><span class="label"><a 
 id="x1-14005r5"></a></span>...
  
  </div>
<!--l. 65--><p class="indent" >  For sending outbound short messages, add the following extension into the default
context:
  <!--l. 67-->
  <div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-14006r1"></a></span>exten&#x00A0;=&#x003E;&#x00A0;2000,1,Answer()&#x00A0;<br /><span class="label"><a 
 id="x1-14007r2"></a></span>exten&#x00A0;=&#x003E;&#x00A0;2000,n,DatacardSendSMS(datacard0,${SmsNumber},${Text})&#x00A0;<br /><span class="label"><a 
 id="x1-14008r3"></a></span>exten&#x00A0;=&#x003E;&#x00A0;2000,n,Hangup()
  
  </div>
<!--l. 73--><p class="indent" >  To be able to send automatic outbound calls, the context <span 
class="pplri8t-x-x-109">"outbound call" </span>has to be created. Here,
you may also adapt the waiting times between the messages.
  <!--l. 75-->
  <div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-14009r1"></a></span>[outbound<span 
class="zplmr7y-x-x-109">-</span>call]&#x00A0;<br /><span class="label"><a 
 id="x1-14010r2"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,1,Wait(2)&#x00A0;<br /><span class="label"><a 
 id="x1-14011r3"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,n,Playback(${Salutation})&#x00A0;<br /><span class="label"><a 
 id="x1-14012r4"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,n,Wait(1)&#x00A0;<br /><span class="label"><a 
 id="x1-14013r5"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,n,Playback(${PassedInfo})&#x00A0;<br /><span class="label"><a 
 id="x1-14014r6"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,n,Wait(1)&#x00A0;<br /><span class="label"><a 
 id="x1-14015r7"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,n,Playback(${PassedInfo})&#x00A0;<br /><span class="label"><a 
 id="x1-14016r8"></a></span>exten&#x00A0;=&#x003E;&#x00A0;s,n,Hangup()
  
  </div>
<!--l. 86--><p class="indent" >  To ensure the system does not hang when there is an incoming SMS on the data card, add the
following context. Incoming short messages will be saved to <span 
class="pplri8t-x-x-109">/var/log/asterisk/sms.txt</span>. You may also
change this path.
  <!--l. 88-->
  <div class="lstlisting" id="listing-10"><span class="label"><a 
 id="x1-14017r1"></a></span>[datacard<span 
class="zplmr7y-x-x-109">-</span>incoming]&#x00A0;<br /><span class="label"><a 
 id="x1-14018r2"></a></span>exten&#x00A0;=&#x003E;&#x00A0;sms,1,Verbose(Incoming&#x00A0;SMS&#x00A0;from&#x00A0;${SMSSRC}&#x00A0;${SMSTXT})&#x00A0;<br /><span class="label"><a 
 id="x1-14019r3"></a></span>exten&#x00A0;=&#x003E;&#x00A0;sms,n,System(echo&#x00A0;&#8217;${STRFTIME(${EPOCH},,%Y<span 
class="zplmr7y-x-x-109">-</span>%m<span 
class="zplmr7y-x-x-109">-</span>%d&#x00A0;%H:%M:%S)}&#x00A0;<span 
class="zplmr7y-x-x-109">-</span>&#x00A0;<br /><span class="label"><a 
 id="x1-14020r4"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;${CHANNEL}&#x00A0;<span 
class="zplmr7y-x-x-109">-</span>&#x00A0;${SMSSRC}:&#x00A0;${SMSTXT}&#8217;&#x00A0;&#x003E;&#x003E;&#x00A0;/var/log/asterisk/sms.txt)&#x00A0;<br /><span class="label"><a 
 id="x1-14021r5"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-14022r6"></a></span>exten&#x00A0;=&#x003E;&#x00A0;sms,n,Hangup()&#x00A0;<br /><span class="label"><a 
 id="x1-14023r7"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-14024r8"></a></span>exten&#x00A0;=&#x003E;&#x00A0;cusd,1,Verbose(Incoming&#x00A0;CUSD:&#x00A0;${CUSDTXT})&#x00A0;<br /><span class="label"><a 
 id="x1-14025r9"></a></span>exten&#x00A0;=&#x003E;&#x00A0;cusd,n,System(echo&#x00A0;&#8217;${STRFTIME(${EPOCH},,%Y<span 
class="zplmr7y-x-x-109">-</span>%m<span 
class="zplmr7y-x-x-109">-</span>%d&#x00A0;%H:%M:%S)}&#x00A0;<span 
class="zplmr7y-x-x-109">-</span>&#x00A0;<br /><span class="label"><a 
 id="x1-14026r10"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;${CHANNEL}:&#x00A0;${CUSDTXT}&#8217;&#x00A0;&#x003E;&#x003E;&#x00A0;/var/log/asterisk/cusd.txt)&#x00A0;<br /><span class="label"><a 
 id="x1-14027r11"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-14028r12"></a></span>exten&#x00A0;=&#x003E;&#x00A0;cusd,n,Hangup()
  
  </div>
<!--l. 103--><p class="noindent" >
  <h5 class="subsubsectionHead"><span class="titlemark">4.3.3  </span> <a 
 id="x1-150004.3.3"></a>Other</h5>
<!--l. 104--><p class="noindent" >Please ensure that the user the system is running as, is able to write to the asterisk spool directory
(by default <span 
class="pplri8t-x-x-109">ASTERISK_SPOOL_DIR </span>is configured as /var/spool/asterisk/outgoing). This can either
be achieved by grating <span 
class="pplri8t-x-x-109">any </span>user the right of writen to that directory (chmod 666) or by adding the
user running Sendinel to the group <span 
class="pplri8t-x-x-109">asterisk</span>
<!--l. 106--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">4.4  </span> <a 
 id="x1-160004.4"></a>Installing Sendinel</h4>
<!--l. 107--><p class="noindent" >Download the source code package from the project page. Extract it and move/copy the contained
folder Sendinel to <span 
class="pplri8t-x-x-109">/opt/</span>, so that the file <span 
class="pplri8t-x-x-109">manage.py </span>should reside in <span 
class="pplri8t-x-x-109">/opt/Sendinel/manage.py</span>
                                                                                     
                                                                                     
<!--l. 110--><p class="indent" >  Change the directory to <span 
class="pplri8t-x-x-109">/opt/Sendinel </span>and run
  <!--l. 112-->
  <div class="lstlisting" id="listing-11"><span class="label"><a 
 id="x1-16001r1"></a></span>python&#x00A0;manage.py&#x00A0;syncdb
  
  </div>
<!--l. 116--><p class="indent" >  You will be asked if you want to create an <span 
class="pplri8t-x-x-109">administrative user</span>. It is recommended to do so. Enter
name, password and e-mail address. After this step you may load some basic data into the system by
running
  <!--l. 118-->
  <div class="lstlisting" id="listing-12"><span class="label"><a 
 id="x1-16002r1"></a></span>python&#x00A0;manage.py&#x00A0;loaddata&#x00A0;backend
  
  </div>
<!--l. 123--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">4.5  </span> <a 
 id="x1-170004.5"></a>The lighttpd server</h4>
<!--l. 124--><p class="noindent" >An example configuration for the lighttpd server can be found in the configuration folder. You can
either copy those files to the corresponding folder (<span 
class="pplri8t-x-x-109">/etc/lighttpd/ </span>or adapt your existing
configuration.
<!--l. 126--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">4.6  </span> <a 
 id="x1-180004.6"></a>Init-Scripts</h4>
<!--l. 127--><p class="noindent" >copy the init scripts <span 
class="pplri8t-x-x-109">sendinel </span>and <span 
class="pplri8t-x-x-109">sendinel-scheduler </span>to <span 
class="pplri8t-x-x-109">/etc/init.d/ </span>and make them executable by
running <!--l. 128-->
  <div class="lstlisting" id="listing-13"><span class="label"><a 
 id="x1-18001r1"></a></span>chmod&#x00A0;+x&#x00A0;[file&#x00A0;name]
  
  </div>
<!--l. 132--><p class="indent" >  Please adapt the scripts to the used path
<!--l. 134--><p class="indent" >  run <!--l. 135-->
  <div class="lstlisting" id="listing-14"><span class="label"><a 
 id="x1-18002r1"></a></span>update<span 
class="zplmr7y-x-x-109">-</span>rc.d&#x00A0;sendinel&#x00A0;defaults
  
  </div>
<!--l. 139--><p class="indent" >  and
  <!--l. 141-->
  <div class="lstlisting" id="listing-15"><span class="label"><a 
 id="x1-18003r1"></a></span>update<span 
class="zplmr7y-x-x-109">-</span>rc.d&#x00A0;sendinel<span 
class="zplmr7y-x-x-109">-</span>scheduler&#x00A0;defaults
  
  </div>
                                                                                     
                                                                                     
<!--l. 1--><p class="noindent" >
  <h3 class="sectionHead"><span class="titlemark">5  </span> <a 
 id="x1-190005"></a>Possible settings for Sendinel</h3>
<!--l. 3--><p class="noindent" >To configure the system, create the file <span 
class="pplri8t-x-x-109">local_settings.py </span>in the sendinel directory.
<!--l. 5--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">5.1  </span> <a 
 id="x1-200005.1"></a>Country Settings</h4>
<!--l. 7--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-210005.1"></a><span 
class="pplb8t-x-x-109">COUNTRY_CODE_PHONE</span></span>
  Prefix of the country the system is going to be used in
<!--l. 11--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-220005.1"></a><span 
class="pplb8t-x-x-109">START_MOBILE_PHONE</span></span>
  Beginning of mobile phone numbers for validation purposes.
<!--l. 14--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">5.2  </span> <a 
 id="x1-230005.2"></a>Asterisk Settings</h4>
<!--l. 15--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-240005.2"></a><span 
class="pplb8t-x-x-109">ASTERISK_USER and ASTERISK_GROUP</span></span>
  Group and user asterisk is running as. In most cases both is <span 
class="pplri8t-x-x-109">asterisk</span>
<!--l. 18--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-250005.2"></a><span 
class="pplb8t-x-x-109">ASTERISK_SPOOL_DIR</span></span>
  The directory asterisk uses for scheduling calls. default: /var/spool/asterisk/outgoing/
<!--l. 22--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-260005.2"></a><span 
class="pplb8t-x-x-109">ASTERISK_DATACARD</span></span>
  select whether to use an external datacard for conducting the calls and the short messages. If False
is selected, another SIP account has to be configured in the asterisk server manually. Sending short
messages is only possible with a connected data card.
<!--l. 25--><p class="indent" >  possible values: True/False (pay attention to the Upcase first letter) default: True
<!--l. 28--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-270005.2"></a><span 
class="pplb8t-x-x-109">ASTERISK_EXTENSION</span></span>
  asterisk extension to be used for outbound calls
<!--l. 31--><p class="indent" >  default: <span 
class="pplri8t-x-x-109">s</span>
                                                                                     
                                                                                     
<!--l. 33--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-280005.2"></a><span 
class="pplb8t-x-x-109">ASTERISK_SIP_ACCOUNT</span></span>
  SIP account to be used for asterisk for datacard use, this should be set to <span 
class="pplri8t-x-x-109">ext-sip-account</span>,
corresponding to the setting in <span 
class="pplri8t-x-x-109">datacard.conf</span>
<!--l. 37--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">5.3  </span> <a 
 id="x1-290005.3"></a>Text-to-Speech settings</h4>
<!--l. 39--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-300005.3"></a><span 
class="pplb8t-x-x-109">FESTIVAL_CACHE</span></span>
  Directory used for caching the speech sound files For use on a plug computer with Debian this
should be set to <span 
class="pplri8t-x-x-109">/lib/init/rw</span>
<!--l. 43--><p class="indent" >  default: <span 
class="pplri8t-x-x-109">tmp</span>
<!--l. 45--><p class="noindent" >
  <h4 class="subsectionHead"><span class="titlemark">5.4  </span> <a 
 id="x1-310005.4"></a>Sendinel Settings</h4>
<!--l. 47--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-320005.4"></a><span 
class="pplb8t-x-x-109">AUTH</span></span>
  Enable/Disable authentication for entered phone numbers. If used, also <span 
class="pplri8t-x-x-109">AUTH NUMBER </span>has to
be set.
<!--l. 50--><p class="indent" >  possible values: True, False
<!--l. 52--><p class="indent" >  default: False
<!--l. 54--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-330005.4"></a><span 
class="pplb8t-x-x-109">AUTH_NUMBER</span></span>
  This setting is only required if authentication is enabled. This entry has to be set to the number of
the used SIM-Card/SIP-Account. It is used for display purposes only.
<!--l. 57--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-340005.4"></a><span 
class="pplb8t-x-x-109">AUTHENTICATION_CALL_TIMEOUT</span></span>
  This setting is only required if authentication is enabled. Time after which the authentication
request gets invalid.
<!--l. 60--><p class="indent" >  default: timedelta(minutes = 3)
<!--l. 62--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-350005.4"></a><span 
class="pplb8t-x-x-109">CALL_SALUTATION</span></span>
  This text is played before the information when a user is called.
                                                                                     
                                                                                     
<!--l. 65--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-360005.4"></a><span 
class="pplb8t-x-x-109">SMS_SALUTATION</span></span>
  This text is put in front of each short message sent through the system.
   
</body></html> 

                                                                                     


